{"ast":null,"code":"var _jsxFileName = \"/home/m4lw/Documents/DECEIPT_EMAIL/frontend/src/pages/Challenge.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport EmailList from '../components/EmailList';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Challenge() {\n  _s();\n  const [emails, setEmails] = useState([]);\n  const [responses, setResponses] = useState([]);\n  const [selectedEmail, setSelectedEmail] = useState(null); // Correo abierto\n  const history = useHistory();\n  useEffect(() => {\n    fetch('http://localhost:5000/api/emails').then(res => res.json()).then(data => setEmails(data)).catch(err => console.error('Error fetching emails:', err));\n  }, []);\n  const handleAnswer = (emailId, userAnswer) => {\n    fetch('http://localhost:5000/api/check', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        emailId,\n        userAnswer\n      })\n    }).then(res => res.json()).then(data => {\n      const newResponses = [...responses, {\n        emailId,\n        ...data\n      }];\n      setResponses(newResponses);\n      setSelectedEmail(null); // Cierra el correo tras responder\n      if (newResponses.length === emails.length) {\n        history.push('/results', {\n          responses: newResponses\n        });\n      }\n    }).catch(err => console.error('Error checking answer:', err));\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Bandeja de entrada\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        gap: '20px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          flex: '1',\n          maxWidth: '400px'\n        },\n        children: /*#__PURE__*/_jsxDEV(EmailList, {\n          emails: emails,\n          responses: responses,\n          onSelectEmail: setSelectedEmail,\n          selectedEmail: selectedEmail\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 42,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 9\n      }, this), selectedEmail && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          flex: '2',\n          background: '#fff',\n          padding: '20px',\n          borderRadius: '5px',\n          boxShadow: '0 2px 5px rgba(0,0,0,0.1)'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: selectedEmail.subject\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"De:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 53,\n            columnNumber: 16\n          }, this), \" \", selectedEmail.sender]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Fecha:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 54,\n            columnNumber: 16\n          }, this), \" \", selectedEmail.date]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: selectedEmail.body\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Enlaces:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 56,\n            columnNumber: 16\n          }, this), \" \", selectedEmail.links.join(', ')]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 13\n        }, this), !responses.find(r => r.emailId === selectedEmail.id) ? /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => handleAnswer(selectedEmail.id, true),\n            style: {\n              marginRight: '10px'\n            },\n            children: \"Phishing\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 59,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => handleAnswer(selectedEmail.id, false),\n            children: \"Leg\\xEDtimo\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 65,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 15\n        }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            color: responses.find(r => r.emailId === selectedEmail.id).isCorrect ? 'green' : 'red'\n          },\n          children: [responses.find(r => r.emailId === selectedEmail.id).isCorrect ? '¡Correcto!' : 'Incorrecto', \" -\", ' ', responses.find(r => r.emailId === selectedEmail.id).explanation]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 37,\n    columnNumber: 5\n  }, this);\n}\n_s(Challenge, \"O7WBc8I6ko1T981nJaNALLA52t4=\", false, function () {\n  return [useHistory];\n});\n_c = Challenge;\nexport default Challenge;\nvar _c;\n$RefreshReg$(_c, \"Challenge\");","map":{"version":3,"names":["React","useState","useEffect","useHistory","EmailList","jsxDEV","_jsxDEV","Challenge","_s","emails","setEmails","responses","setResponses","selectedEmail","setSelectedEmail","history","fetch","then","res","json","data","catch","err","console","error","handleAnswer","emailId","userAnswer","method","headers","body","JSON","stringify","newResponses","length","push","className","children","fileName","_jsxFileName","lineNumber","columnNumber","style","display","gap","flex","maxWidth","onSelectEmail","background","padding","borderRadius","boxShadow","subject","sender","date","links","join","find","r","id","onClick","marginRight","color","isCorrect","explanation","_c","$RefreshReg$"],"sources":["/home/m4lw/Documents/DECEIPT_EMAIL/frontend/src/pages/Challenge.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport EmailList from '../components/EmailList';\n\nfunction Challenge() {\n  const [emails, setEmails] = useState([]);\n  const [responses, setResponses] = useState([]);\n  const [selectedEmail, setSelectedEmail] = useState(null); // Correo abierto\n  const history = useHistory();\n\n  useEffect(() => {\n    fetch('http://localhost:5000/api/emails')\n      .then(res => res.json())\n      .then(data => setEmails(data))\n      .catch(err => console.error('Error fetching emails:', err));\n  }, []);\n\n  const handleAnswer = (emailId, userAnswer) => {\n    fetch('http://localhost:5000/api/check', {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({ emailId, userAnswer })\n    })\n      .then(res => res.json())\n      .then(data => {\n        const newResponses = [...responses, { emailId, ...data }];\n        setResponses(newResponses);\n        setSelectedEmail(null); // Cierra el correo tras responder\n        if (newResponses.length === emails.length) {\n          history.push('/results', { responses: newResponses });\n        }\n      })\n      .catch(err => console.error('Error checking answer:', err));\n  };\n\n  return (\n    <div className=\"container\">\n      <h1>Bandeja de entrada</h1>\n      <div style={{ display: 'flex', gap: '20px' }}>\n        {/* Lista de correos */}\n        <div style={{ flex: '1', maxWidth: '400px' }}>\n          <EmailList\n            emails={emails}\n            responses={responses}\n            onSelectEmail={setSelectedEmail}\n            selectedEmail={selectedEmail}\n          />\n        </div>\n        {/* Detalle del correo seleccionado */}\n        {selectedEmail && (\n          <div style={{ flex: '2', background: '#fff', padding: '20px', borderRadius: '5px', boxShadow: '0 2px 5px rgba(0,0,0,0.1)' }}>\n            <h2>{selectedEmail.subject}</h2>\n            <p><strong>De:</strong> {selectedEmail.sender}</p>\n            <p><strong>Fecha:</strong> {selectedEmail.date}</p>\n            <p>{selectedEmail.body}</p>\n            <p><strong>Enlaces:</strong> {selectedEmail.links.join(', ')}</p>\n            {!responses.find(r => r.emailId === selectedEmail.id) ? (\n              <div>\n                <button\n                  onClick={() => handleAnswer(selectedEmail.id, true)}\n                  style={{ marginRight: '10px' }}\n                >\n                  Phishing\n                </button>\n                <button onClick={() => handleAnswer(selectedEmail.id, false)}>\n                  Legítimo\n                </button>\n              </div>\n            ) : (\n              <p style={{ color: responses.find(r => r.emailId === selectedEmail.id).isCorrect ? 'green' : 'red' }}>\n                {responses.find(r => r.emailId === selectedEmail.id).isCorrect ? '¡Correcto!' : 'Incorrecto'} -{' '}\n                {responses.find(r => r.emailId === selectedEmail.id).explanation}\n              </p>\n            )}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default Challenge;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}